Array.typeTag___='Array';Object.typeTag___='Object';if(Array.prototype.indexOf===void 0){Array.prototype.indexOf=function(specimen){var len=this.length;for(var i=0;i<len;i+=1){if(this[i]===specimen){return i;}}return-1;};}if(Array.prototype.lastIndexOf===void 0){Array.prototype.lastIndexOf=function(specimen){for(var i=this.length;--i>=0;){if(this[i]===specimen){return i;}}return-1;};}if(Date.prototype.toISOString===void 0){Date.prototype.toISOString=function(){function f(n){return n<10?'0'+n:n;}return this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z';};}Function.prototype.bind=function(thisObject,var_args){var
self=this;var args=Array.prototype.slice.call(arguments,1);return ___.primFreeze(___.simpleFunc(function(var_args){self.apply(thisObject,args.concat(___.args(arguments)));}));};Function.prototype['super']=function(){caja.fail('"super" may only be called at the beginning of a Caja constructor.');};var caja;var ___;(function(global){var myLogFunc_=function(str,opt_stop){};function getLogFunc(){return myLogFunc_;}function setLogFunc(newLogFunc){myLogFunc_=newLogFunc;}function log(str){myLogFunc_(String(str));}function
fail(var_args){typeof console!=='undefined'&&console.trace();var message=Array.prototype.slice.call(arguments,0).join('');myLogFunc_(message,true);throw new Error(message);}function enforce(test,var_args){return test||fail.apply({},Array.prototype.slice.call(arguments,1));}function enforceType(specimen,typename,opt_name){if(typeof specimen!==typename){fail('expected ',typename,' instead of ',typeof specimen,': ',opt_name||specimen);}return specimen;}function enforceNat(specimen){enforceType(specimen,'number');if(Math.floor(specimen)!==specimen){fail('Must be integral: ',specimen);}if(specimen<0){fail('Must not be negative: ',specimen);}if(Math.floor(specimen-1)!==specimen-1){fail('Beyond precision limit: ',specimen);}if(Math.floor(specimen-1)>=specimen){fail('Must not be infinite: ',specimen);}return specimen;}function
debugReference(obj){switch(typeof obj){case'object':{if(obj===null){return'<null>';}return'['+(obj.constructor.name||'Object')+']';}default:return'('+obj+':'+typeof obj+')';}}var myKeeper_={'toString':function(){return'<Logging Keeper>';},'handleRead':function(obj,name,opt_shouldThrow){if(opt_shouldThrow){fail('Not readable: (',debugReference(obj),').',name);}log('Not readable: ('+debugReference(obj)+').'+name);return void 0;},'handleCall':function(obj,name,args){fail('Not callable: (',debugReference(obj),').',name);},'handleSet':function(obj,name,val){fail('Not settable: (',debugReference(obj),').',name);},'handleDelete':function(obj,name){fail('Not deletable: (',debugReference(obj),').',name);}};function
getKeeper(){return myKeeper_;}function setKeeper(newKeeper){myKeeper_=newKeeper;}Object.prototype.handleRead___=function(name,opt_shouldThrow){var handlerName=name+'_getter___';if(this[handlerName]){return this[handlerName](opt_shouldThrow);}return myKeeper_.handleRead(this,name,opt_shouldThrow);};Object.prototype.handleCall___=function(name,args){var handlerName=name+'_handler___';if(this[handlerName]){return this[handlerName].call(this,args);}return myKeeper_.handleCall(this,name,args);};Object.prototype.handleSet___=function(name,val){var
handlerName=name+'_setter___';if(this[handlerName]){return this[handlerName](val);}return myKeeper_.handleSet(this,name,val);};Object.prototype.handleDelete___=function(name){var handlerName=name+'_deleter___';if(this[handlerName]){return this[handlerName]();}return myKeeper_.handleDelete(this,name);};var originalHOP_=Object.prototype.hasOwnProperty;function hasOwnProp(obj,name){var t=typeof obj;if(t!=='object'&&t!=='function'){return false;}return originalHOP_.call(obj,name);}function endsWith(str,suffix){enforceType(str,'string');enforceType(suffix,'string');var
strLen=str.length;var sufLen=suffix.length;return strLen>=sufLen&&str.substring(strLen-sufLen,strLen)===suffix;}function directConstructor(obj){if(obj===null){return void 0;}try{if(typeof obj!=='object'){return void 0;}if(hasOwnProp(obj,'__proto__')){if(obj.__proto__===null){return void 0;}return obj.__proto__.constructor;}var result;if(!hasOwnProp(obj,'constructor')){result=obj.constructor;}else{var oldConstr=obj.constructor;if(!(delete obj.constructor)){return void 0;}result=obj.constructor;obj.constructor=oldConstr;}if(result.prototype.constructor===result){obj.__proto__=result.prototype;}return result;}catch(ex){return void
0;}}function isJSONContainer(obj){if(obj==null){return false;}var constr=directConstructor(obj);var typeTag=constr&&constr.typeTag___;return typeTag==='Object'||typeTag==='Array';}function isFrozen(obj){var t=typeof obj;if(t!=='object'&&t!=='function'){return true;}return hasOwnProp(obj,'___FROZEN___');}function primFreeze(obj){if(void 0===obj){return obj;}if(null===obj){return obj;}if(isFrozen(obj)){return obj;}var typ=typeof obj;if(typ!=='object'&&typ!=='function'){return obj;}var badFlags=[];for(var
k in obj){if(endsWith(k,'_canSet___')||endsWith(k,'_canDelete___')){if(obj[k]){badFlags.push(k);}}}for(var i=0;i<badFlags.length;i++){var flag=badFlags[i];if(hasOwnProp(obj,flag)){if(!(delete obj[flag])){fail('internal: failed delete: ',debugReference(obj),'.',flag);}}if(obj[flag]){obj[flag]=false;}}obj.___FROZEN___=true;if(typ==='function'){if(obj.prototype){primFreeze(obj.prototype);}}return obj;}function freeze(obj){if(!isJSONContainer(obj)){fail('caja.freeze(obj) applies only to JSON Containers: ',debugReference(obj));}return primFreeze(obj);}function
copy(obj){if(!isJSONContainer(obj)){fail('caja.copy(obj) applies only to JSON Containers: ',debugReference(obj));}var result=obj.constructor.typeTag___==='Array'?[]:{};each(obj,simpleFunc(function(k,v){result[k]=v;}));return result;}function snapshot(obj){return primFreeze(copy(obj));}function canRead(obj,name){return!(!obj[name+'_canRead___']);}function canEnum(obj,name){return!(!obj[name+'_canEnum___']);}function canCall(obj,name){return!(!(obj[name+'_canCall___']||obj[name+'_grantCall___']));}function
canSet(obj,name){return!(!(obj[name+'_canSet___']||obj[name+'_grantSet___']));}function canDelete(obj,name){return!(!obj[name+'_canDelete___']);}function fastpathRead(obj,name){enforce(obj!=null,'Cannot fastpath read of ',name,' on null');obj[name+'_canRead___']=true;}function fastpathEnum(obj,name){enforce(obj!=null,'Cannot fastpath enum of ',name,' on null');fastpathRead(obj,name);obj[name+'_canEnum___']=true;}function fastpathEnumOnly(obj,name){obj[name+'_canEnum___']=true;}function fastpathCall(obj,name){enforce(obj!=null,'Cannot fastpath call of ',name,' on null');obj[name+'_canCall___']=true;if(obj[name+'_canSet___']){obj[name+'_canSet___']=false;}if(obj[name+'_grantSet___']){obj[name+'_grantSet___']=false;}}function
fastpathSet(obj,name){enforce(obj!=null,'Cannot fastpath set of member ',name,' on null');if(isFrozen(obj)){fail("Can't set .",name,' on frozen (',debugReference(obj),')');}fastpathEnum(obj,name);obj[name+'_canSet___']=true;if(obj[name+'_canCall___']){obj[name+'_canCall___']=false;}if(obj[name+'_grantCall___']){obj[name+'_grantCall___']=false;}}function fastpathDelete(obj,name){enforce(obj!=null,'Cannot fastpath delete of member ',name,' on null');if(isFrozen(obj)){fail("Can't delete .",name,' on frozen (',debugReference(obj),')');}obj[name+'_canDelete___']=true;}function
grantRead(obj,name){fastpathRead(obj,name);}function grantEnum(obj,name){fastpathEnum(obj,name);}function grantEnumOnly(obj,name){fastpathEnumOnly(obj,name);}function grantCall(obj,name){obj[name+'_grantCall___']=true;}function grantSet(obj,name){obj[name+'_grantSet___']=true;}function grantDelete(obj,name){fastpathDelete(obj,name);}function isCtor(constr){return typeof constr==='function'&&!(!constr.___CONSTRUCTOR___);}function isMethod(meth){return typeof meth==='function'&&!(!meth.___METHOD___);}function
isSimpleFunc(fun){return typeof fun==='function'&&!(!fun.___SIMPLE_FUNC___);}function isXo4aFunc(func){return typeof func==='function'&&!(!(func.___XO4A___||func.___SIMPLE_FUNC___));}function ctor(constr,opt_Sup,opt_name){enforceType(constr,'function',opt_name);if(isMethod(constr)){fail("Methods can't be constructors: ",constr);}if(isSimpleFunc(constr)){fail("Simple functions can't be constructors: ",constr);}if(isXo4aFunc(constr)){fail("Exophoric functions can't be constructors: ",constr);}constr.___CONSTRUCTOR___=true;derive(constr,opt_Sup);if(opt_name){constr.NAME___=String(opt_name);}return constr;}function
derive(constr,opt_Sup){if(opt_Sup){opt_Sup=asCtor(opt_Sup);if(hasOwnProp(constr,'super')){fail("Can't inherit twice: ",constr,',',opt_Sup);}else{if(isFrozen(constr)){fail('Derived constructor already frozen: ',constr);}constr['super']=function(thisObj,var_args){return opt_Sup.apply(thisObj,Array.prototype.slice.call(arguments,1));};}}}function splitCtor(constr,initer,opt_Sup,opt_name){ctor(constr,opt_Sup,opt_name);constr.init___=initer;constr.make___=function(args){this.underConstruction___=true;constr.init___.apply(this,args);delete
this.underConstruction___;if(this.delayedTrademarks___){this.trademarks___=this.delayedTrademarks___;delete this.delayedTrademarks___;}};constr.make___.prototype=constr.prototype;constr.apply=function(that,args){return constr.init___.apply(that,args);};return constr;}function attach(that,meth){if(typeof that!=='function'){enforceType(that,'object');}if(that===null){fail('Internal: may not attach to null: ',meth);}if(!isMethod(meth)&&!isSimpleFunc(meth)){fail('Internal: attach should not see non-methods: ',meth);}if(meth.___ATTACHMENT___===that){return meth;}if(meth.___ATTACHMENT___!==undefined){fail('Method ',meth,' cannot be reattached to: ',that);}function
result(var_args){if(this!==that){fail('Method ',meth,' is already attached.\nthis: '+this+'\nthat: '+that);}return meth.apply(that,arguments);}var result=method(result,meth.___NAME___);result.___ATTACHMENT___=that;result.___ORIGINAL___=meth;return result;}function xo4a(func,opt_name){enforceType(func,'function',opt_name);func.___XO4A___=true;return primFreeze(func);}function method(meth,opt_name){enforceType(meth,'function',opt_name);if(isCtor(meth)){fail("Constructors can't be methods: ",meth);}if(isSimpleFunc(meth)){fail("Simple functions can't be methods: ",meth);}if(isXo4aFunc(meth)){fail("Internal: exophoric functions can't be methods: ",meth);}meth.___METHOD___=true;return primFreeze(meth);}function
simpleFunc(fun,opt_name){enforceType(fun,'function',opt_name);if(isCtor(fun)){fail("Constructors can't be simple functions: ",fun);}if(isMethod(fun)){fail("Methods can't be simple function: ",fun);}fun.___SIMPLE_FUNC___=true;fun.apply_canCall___=true;fun.call_canCall___=true;return fun;}function asCtorOnly(constr){if(isCtor(constr)||isSimpleFunc(constr)){return constr;}enforceType(constr,'function');if(isMethod(constr)){fail("Methods can't be called as constructors: ",constr);}fail("Untamed functions can't be called as constructors: ",constr);}function
asCtor(constr){return primFreeze(asCtorOnly(constr));}function asMethod(meth){if(isSimpleFunc(meth)||isMethod(meth)){if(!isFrozen(meth)){fail('internal: non-frozen func stored as method: ',meth);}return meth;}enforceType(meth,'function');if(isCtor(meth)){fail("Constructors can't be called as methods: ",meth);}fail("Untamed functions can't be called as methods: ",meth);}function asSimpleFunc(fun){if(isSimpleFunc(fun)){return primFreeze(fun);}enforceType(fun,'function');if(isCtor(fun)){if(fun===Number||fun===String||fun===Boolean){return fun;}fail("Constructors can't be called as simple functions: ",fun);}if(isMethod(fun)){if(fun.___ATTACHMENT___){return fun;}fail("Methods can't be called as simple functions: ",fun);}if(isXo4aFunc(fun)){fail("Exophoric functions can't be called as simple functions: ",fun);}fail("Untamed functions can't be called as simple functions: ",fun);}function
asXo4aFunc(fun){if(isXo4aFunc(fun)){return fun;}return asSimpleFunc(fun);}function isPrototypical(o){if(typeof o!=='object'){return false;}var c=o.constructor;if(typeof c!=='function'){return false;}return c.prototype===o;}function asFirstClass(value){switch(typeof value){case'function':{if((isMethod(value)||isXo4aFunc(value)||isCtor(value))&&isFrozen(value)||value instanceof RegExp){return value;}else{fail("Internal: toxic function encountered: ",value);}break;}case'object':{if(isPrototypical(value)){fail("Internal: prototypical object encountered: ",value);}return value;break;}default:return value;}}function
setMember(constr,name,member){name=String(name);if(endsWith(name,'__')||name==='valueOf'){fail('Reserved name: ',name);}var proto=asCtorOnly(constr).prototype;if(!canSetProp(proto,name)){fail('not settable: ',name);}if(isMethod(member)||isXo4aFunc(member)){fastpathCall(proto,name);fastpathEnumOnly(proto,name);}else if(isSimpleFunc(member)){fastpathCall(proto,name);fastpathRead(proto,name);fastpathEnum(proto,name);}else{fastpathRead(proto,name);fastpathEnum(proto,name);}proto[name]=asFirstClass(member);}function
canReadProp(that,name){name=String(name);if(endsWith(name,'__')){return false;}return canRead(that,name);}function readProp(that,name){name=String(name);if(canReadProp(that,name)){return that[name];}if(canCall(that,name)){return attach(that,that[name]);}return that.handleRead___(name,false);}function canReadPub(obj,name){name=String(name);if(endsWith(name,'_')){return false;}if(canRead(obj,name)){return true;}if(!isJSONContainer(obj)){return false;}if(!hasOwnProp(obj,name)){return false;}fastpathRead(obj,name);return true;}function
readPub(obj,name,opt_shouldThrow){if(typeof name==='number'){return obj[name];}name=String(name);if(canReadPub(obj,name)){return obj[name];}if(canCall(obj,name)){return attach(obj,obj[name]);}return obj.handleRead___(name,opt_shouldThrow);}function readImport(module_imports,name){return readPub(module_imports,name);}function canInnocentEnum(obj,name){name=String(name);if(endsWith(name,'___')){return false;}return true;}function canEnumProp(that,name){name=String(name);if(endsWith(name,'__')){return false;}return canEnum(that,name);}function
canEnumPub(obj,name){name=String(name);if(endsWith(name,'_')){return false;}if(canEnum(obj,name)){return true;}if(!isJSONContainer(obj)){return false;}if(!hasOwnProp(obj,name)){return false;}fastpathEnum(obj,name);return true;}function canEnumOwn(obj,name){name=String(name);return hasOwnProp(obj,name)&&canEnumPub(obj,name);}function Token(name){return primFreeze({'toString':primFreeze(simpleFunc(function(){return name;}))});}primFreeze(simpleFunc(Token));var BREAK=Token('BREAK');function each(obj,fn){fn=asSimpleFunc(fn);if(obj&&obj.constructor.typeTag___==='Array'){var
len=obj.length;for(var i=0;i<len;i++){if(fn(i,readPub(obj,i))===BREAK){return undefined;}}}else{for(var k in obj){if(canEnumOwn(obj,k)){if(fn(k,readPub(obj,k))===BREAK){return undefined;}}}}}function canCallProp(that,name){name=String(name);if(endsWith(name,'__')){return false;}if(canCall(that,name)){return true;}if(!canReadProp(that,name)){return false;}var func=that[name];if(!isSimpleFunc(func)){return false;}fastpathCall(that,name);return true;}function callProp(that,name,args){name=String(name);if(canCallProp(that,name)){var
meth=that[name];return meth.apply(that,args);}else{return that.handleCall___(name,args);}}function canCallPub(obj,name){name=String(name);if(endsWith(name,'_')){return false;}if(canCall(obj,name)){return true;}if(!canReadPub(obj,name)){return false;}var func=obj[name];if(!isXo4aFunc(func)&&!isMethod(func)){return false;}fastpathCall(obj,name);return true;}function callPub(obj,name,args){name=String(name);if(canCallPub(obj,name)){var meth=obj[name];return meth.apply(obj,args);}if(obj.handleCall___){return obj.handleCall___(name,args);}fail('not callable %o %s',debugReference(obj),name);}function
canSetProp(that,name){name=String(name);if(endsWith(name,'__')){return false;}if(name==='valueOf'){return false;}if(canSet(that,name)){return true;}return!isFrozen(that);}function setProp(that,name,val){name=String(name);if(canSetProp(that,name)){if(name!=='toString'){fastpathSet(that,name);}if(!hasOwnProp(that,name)){fastpathDelete(that,name);}return that[name]=asFirstClass(val);}else{return that.handleSet___(name,val);}}function canSetPub(obj,name){name=String(name);if(endsWith(name,'_')){return false;}if(name==='valueOf'){return false;}if(canSet(obj,name)){return true;}return!isFrozen(obj)&&isJSONContainer(obj);}function
setPub(obj,name,val){name=String(name);if(canSetPub(obj,name)){if(name!=='toString'){fastpathSet(obj,name);}return obj[name]=asFirstClass(val);}else{return obj.handleSet___(name,val);}}function canSetStatic(ctor,staticMemberName){staticMemberName=''+staticMemberName;if(typeof ctor!=='function'){log('Cannot set static member of non function',ctor);return false;}if(isFrozen(ctor)){log('Cannot set static member of frozen function',ctor);return false;}if(staticMemberName in ctor){log('Cannot override static member ',staticMemberName);return false;}if(endsWith(staticMemberName,'_')||staticMemberName==='valueOf'){log('Illegal static member name ',staticMemberName);return false;}return true;}function
setStatic(ctor,staticMemberName,staticMemberValue){staticMemberName=''+staticMemberName;if(canSetStatic(ctor,staticMemberName)){ctor[staticMemberName]=staticMemberValue;fastpathRead(ctor,staticMemberName);}else{ctor.handleSet___(staticMemberName,staticMemberValue);}}function canDeleteProp(obj,name){name=String(name);if(isFrozen(obj)){return false;}if(endsWith(name,'__')){return false;}if(name==='valueOf'){return false;}if(isJSONContainer(obj)){return true;}return!(!obj[name+'_canDelete___']);}function
deleteProp(obj,name){name=String(name);if(canDeleteProp(obj,name)){return deleteFieldEntirely(obj,name);}else{return obj.handleDelete___(name);}}function canDeletePub(obj,name){name=String(name);if(isFrozen(obj)){return false;}if(endsWith(name,'__')){return false;}if(name==='valueOf'){return false;}if(isJSONContainer(obj)){return true;}return false;}function deletePub(obj,name){name=String(name);if(canDeletePub(obj,name)){return deleteFieldEntirely(obj,name);}else{return obj.handleDelete___(name);}}function
deleteFieldEntirely(obj,name){delete obj[name+'_canRead___'];delete obj[name+'_canEnum___'];delete obj[name+'_canCall___'];delete obj[name+'_canSet___'];delete obj[name+'_canDelete___'];return delete obj[name]||(fail('not deleted: ',name),false);}function args(original){return primFreeze(Array.prototype.slice.call(original,0));}var USELESS=Token('USELESS');var callStackSealer=makeSealerUnsealerPair();function tameException(ex){try{switch(typeof ex){case'object':{if(ex===null){return null;}if(ex instanceof
Error){var message=ex.message||ex.desc;var stack=ex.stack;var name=ex.constructor&&ex.constructor.name;message=message==null?void 0:''+message;stack=stack==null?void 0:callStackSealer.seal(''+stack);name=name==null?void 0:''+name;return primFreeze({'message':message,'name':name,'stack':stack});}return''+ex;}case'string':;case'number':;case'boolean':;case'undefined':return ex;case'function':return void 0;default:{log('Unrecognized exception type '+typeof ex);return void 0;}}}catch(_){return void 0;}}function
setMemberMap(sub,members){each(members,simpleFunc(function(mname,member){setMember(sub,mname,member);}));}function commonDef(init){return function(sub,opt_Sup,opt_members,opt_statics){var sup=opt_Sup||Object;var members=opt_members||{};var statics=opt_statics||{};if(isSimpleFunc(sub)){derive(sub,sup);}else{ctor(sub,sup);}function PseudoSuper(){}PseudoSuper.prototype=sup.prototype;sub.prototype=new PseudoSuper();if(sub.make___){sub.make___.prototype=sub.prototype;}sub.prototype.constructor=sub;init(sub,members);each(statics,simpleFunc(function(sname,staticMember){setStatic(sub,sname,staticMember);}));};}var
def=commonDef(function(sub,members){setMemberMap(sub,members);});var unsafeDef=commonDef(function(sub,members){each(members,simpleFunc(function(key,val){sub.prototype[key]=val;}));});function useGetHandler(obj,name,getHandler){obj[name+'_getter___']=getHandler;}function useApplyHandler(obj,name,applyHandler){obj[name+'_handler___']=applyHandler;}function useCallHandler(obj,name,callHandler){useApplyHandler(obj,name,function(args){return callHandler.apply(this,args);});}function useSetHandler(obj,name,setHandler){obj[name+'_setter___']=setHandler;}function
useDeleteHandler(obj,name,deleteHandler){obj[name+'_deleter___']=deleteHandler;}function grantSimpleFunc(obj,name){simpleFunc(obj[name],name);grantCall(obj,name);grantRead(obj,name);}function grantMethod(constr,name){method(constr.prototype[name],name);grantCall(constr.prototype,name);}function useGetAndCallHandlers(constr,name,func){useGetHandler(constr,name,function(){return func;});useCallHandler(constr,name,func);}function grantMutator(constr,name){var original=constr.prototype[name];useGetAndCallHandlers(constr.prototype,name,xo4a(function(var_args){if(isFrozen(this)){fail("Can't .",name,' a frozen object');}return original.apply(this,arguments);}));}function
enforceMatchable(regexp){if(regexp instanceof RegExp){if(isFrozen(regexp)){fail("Can't match with frozen RegExp: ",regexp);}}}function all2(func2,arg1,arg2s){var len=arg2s.length;for(var i=0;i<len;i+=1){func2(arg1,arg2s[i]);}}all2(grantRead,Math,['E','LN10','LN2','LOG2E','LOG10E','PI','SQRT1_2','SQRT2']);all2(grantSimpleFunc,Math,['abs','acos','asin','atan','atan2','ceil','cos','exp','floor','log','max','min','pow','random','round','sin','sqrt','tan']);ctor(Object,void 0,'Object');all2(grantMethod,Object,['toString','toLocaleString','valueOf','isPrototypeOf']);grantRead(Object.prototype,'length');useGetAndCallHandlers(Object.prototype,'hasOwnProperty',xo4a(function(name){name=String(name);return canReadPub(this,name)&&hasOwnProp(this,name);}));useGetAndCallHandlers(Object.prototype,'propertyIsEnumerable',xo4a(function(name){name=String(name);return canReadPub(this,name)&&Object.prototype.propertyIsEnumerable.call(this,name);}));useGetAndCallHandlers(Object.prototype,'freeze_',method(function(){return primFreeze(this);}));useGetAndCallHandlers(Function.prototype,'apply',xo4a(function(that,realArgs){return asXo4aFunc(this).apply(that,realArgs);}));useGetAndCallHandlers(Function.prototype,'call',xo4a(function(that,realArgs){return asXo4aFunc(this).apply(that,Array.prototype.slice.call(arguments,1));}));ctor(Array,Object,'Array');all2(grantMethod,Array,['concat','join','slice','indexOf','lastIndexOf']);all2(grantMutator,Array,['pop','push','reverse','shift','splice','unshift']);useGetAndCallHandlers(Array.prototype,'sort',xo4a(function(comparator){if(isFrozen(this)){fail("Can't sort a frozen array.");}if(comparator){return Array.prototype.sort.call(this,___.asSimpleFunc(comparator));}else{return Array.prototype.sort.call(this);}}));ctor(String,Object,'String');grantSimpleFunc(String,'fromCharCode');all2(grantMethod,String,['charAt','charCodeAt','concat','indexOf','lastIndexOf','localeCompare','slice','substr','substring','toLowerCase','toLocaleLowerCase','toUpperCase','toLocaleUpperCase']);useGetAndCallHandlers(String.prototype,'match',xo4a(function(regexp){enforceMatchable(regexp);return this.match(regexp);}));useGetAndCallHandlers(String.prototype,'replace',xo4a(function(searchValue,replaceValue){enforceMatchable(searchValue);return this.replace(searchValue,typeof
replaceValue==='function'?___.asSimpleFunc(replaceValue):''+replaceValue);}));useGetAndCallHandlers(String.prototype,'search',xo4a(function(regexp){enforceMatchable(regexp);return this.search(regexp);}));useGetAndCallHandlers(String.prototype,'split',xo4a(function(separator,limit){enforceMatchable(separator);return this.split(separator,limit);}));ctor(Boolean,Object,'Boolean');ctor(Number,Object,'Number');all2(grantRead,Number,['MAX_VALUE','MIN_VALUE','NaN','NEGATIVE_INFINITY','POSITIVE_INFINITY']);all2(grantMethod,Number,['toFixed','toExponential','toPrecision']);ctor(Date,Object,'Date');grantSimpleFunc(Date,'parse');grantSimpleFunc(Date,'UTC');all2(grantMethod,Date,['toDateString','toTimeString','toUTCString','toLocaleString','toLocaleDateString','toLocaleTimeString','toISOString','getDay','getUTCDay','getTimezoneOffset','getTime','getFullYear','getUTCFullYear','getMonth','getUTCMonth','getDate','getUTCDate','getHours','getUTCHours','getMinutes','getUTCMinutes','getSeconds','getUTCSeconds','getMilliseconds','getUTCMilliseconds']);all2(grantMutator,Date,['setTime','setFullYear','setUTCFullYear','setMonth','setUTCMonth','setDate','setUTCDate','setHours','setUTCHours','setMinutes','setUTCMinutes','setSeconds','setUTCSeconds','setMilliseconds','setUTCMilliseconds']);ctor(RegExp,Object,'RegExp');grantMutator(RegExp,'exec');grantMutator(RegExp,'test');all2(grantRead,RegExp,['source','global','ignoreCase','multiline','lastIndex']);grantMethod(Function,'bind');ctor(Error,Object,'Error');grantRead(Error,'name');grantRead(Error,'message');ctor(EvalError,Error,'EvalError');ctor(RangeError,Error,'RangeError');ctor(ReferenceError,Error,'ReferenceError');ctor(SyntaxError,Error,'SyntaxError');ctor(TypeError,Error,'TypeError');ctor(URIError,Error,'URIError');var
sharedImports;var myNewModuleHandler;function getNewModuleHandler(){return myNewModuleHandler;}function setNewModuleHandler(newModuleHandler){myNewModuleHandler=newModuleHandler;}var ignoreNewModule=freeze({'handle':simpleFunc(function(newModule){})});function makeNormalNewModuleHandler(){var imports=copy(sharedImports);return freeze({'getImports':simpleFunc(function(){return imports;}),'setImports':simpleFunc(function(newImports){imports=newImports;}),'handle':simpleFunc(function(newModule){newModule(___,imports);})});}function
loadModule(module){callPub(myNewModuleHandler,'handle',[primFreeze(simpleFunc(module))]);return module;}var registeredImports=[];function getId(imports){enforceType(imports,'object','imports');var id;if('id___'in imports){id=enforceType(imports.id___,'number','id');}else{id=imports.id___=registeredImports.length;}registeredImports[id]=imports;return id;}function getImports(id){var result=registeredImports[enforceType(id,'number','id')];if(result===void 0){fail('imports#',id,' unregistered');}return result;}function
unregister(imports){enforceType(imports,'object','imports');if('id___'in imports){var id=enforceType(imports.id___,'number','id');registeredImports[id]=void 0;}}function hasTrademark(trademark,obj){if(!hasOwnProp(obj,"trademarks___")){return false;}var list=obj.trademarks___;for(var i=0;i<list.length;++i){if(list[i]===trademark){return true;}}return false;}function guard(trademark,obj){enforce(hasTrademark(trademark,obj),"This object does not have the given trademark");}function stamp(trademark,obj,opt_allow_constructed){enforce(typeof
trademark==='object','The supplied trademark is not an object.');enforce(!isFrozen(obj),'The supplied object '+obj+' is frozen.');if(!isJSONContainer(obj)&&typeof obj!=='function'&&!obj.underConstruction___&&!opt_allow_constructed){fail('The supplied object '+obj+' has already been constructed and may not be stamped.');}var list=obj.underConstruction___?"delayedTrademarks___":"trademarks___";if(!obj[list]){obj[list]=[];}obj[list].push(trademark);return obj;}function initializeMap(list){var result={};for(var
i=0;i<list.length;i+=2){setPub(result,list[i],list[i+1]);}return result;}function makeSealerUnsealerPair(){var flag=false;var squirrel=null;function seal(payload){function box(){flag=true,squirrel=payload;}box.toString=primFreeze(simpleFunc(function(){return'(box)';}));return primFreeze(simpleFunc(box));}function unseal(box){flag=false;squirrel=null;try{asSimpleFunc(box)();if(!flag){throw new Error('Sealer/Unsealer mismatch');}return squirrel;}finally{flag=false;squirrel=null;}}return freeze({'seal':seal,'unseal':unseal});}safeCaja={'getLogFunc':getLogFunc,'setLogFunc':setLogFunc,'log':log,'fail':fail,'enforce':enforce,'enforceType':enforceType,'enforceNat':enforceNat,'isJSONContainer':isJSONContainer,'freeze':freeze,'copy':copy,'snapshot':snapshot,'canReadPub':canReadPub,'readPub':readPub,'canEnumPub':canEnumPub,'canEnumOwn':canEnumOwn,'canInnocentEnum':canInnocentEnum,'BREAK':BREAK,'each':each,'canCallPub':canCallPub,'callPub':callPub,'canSetPub':canSetPub,'setPub':setPub,'canDeletePub':canDeletePub,'deletePub':deletePub,'hasTrademark':hasTrademark,'guard':guard,'makeSealerUnsealerPair':makeSealerUnsealerPair,'def':def,'USELESS':USELESS};caja=copy(safeCaja);caja.def=unsafeDef;sharedImports={'caja':safeCaja,'null':null,'false':false,'true':true,'NaN':NaN,'Infinity':Infinity,'undefined':void
0,'parseInt':simpleFunc(parseInt),'parseFloat':simpleFunc(parseFloat),'isNaN':simpleFunc(isNaN),'isFinite':simpleFunc(isFinite),'decodeURI':simpleFunc(decodeURI),'decodeURIComponent':simpleFunc(decodeURIComponent),'encodeURI':simpleFunc(encodeURI),'encodeURIComponent':simpleFunc(encodeURIComponent),'Math':Math,'Object':Object,'Array':Array,'String':String,'Boolean':Boolean,'Number':Number,'Date':Date,'RegExp':RegExp,'Error':Error,'EvalError':EvalError,'RangeError':RangeError,'ReferenceError':ReferenceError,'SyntaxError':SyntaxError,'TypeError':TypeError,'URIError':URIError};each(sharedImports,simpleFunc(function(k,v){switch(typeof
v){case'object':{if(v!==null){primFreeze(v);}break;}case'function':{primFreeze(v);break;}}}));primFreeze(sharedImports);___={'getKeeper':getKeeper,'setKeeper':setKeeper,'directConstructor':directConstructor,'isFrozen':isFrozen,'primFreeze':primFreeze,'canRead':canRead,'allowRead':grantRead,'grantRead':grantRead,'canEnum':canEnum,'allowEnum':grantEnum,'grantEnum':grantEnum,'canCall':canCall,'allowCall':grantCall,'grantCall':grantCall,'canSet':canSet,'allowSet':grantSet,'grantSet':grantSet,'canDelete':canDelete,'allowDelete':grantDelete,'grantDelete':grantDelete,'readImport':readImport,'isCtor':isCtor,'isMethod':isMethod,'isSimpleFunc':isSimpleFunc,'isXo4aFunc':isXo4aFunc,'ctor':ctor,'asCtorOnly':asCtorOnly,'asCtor':asCtor,'splitCtor':splitCtor,'method':method,'asMethod':asMethod,'simpleFunc':simpleFunc,'asSimpleFunc':asSimpleFunc,'xo4a':xo4a,'setMember':setMember,'setMemberMap':setMemberMap,'initializeMap':initializeMap,'attach':attach,'canReadProp':canReadProp,'readProp':readProp,'canEnumProp':canEnumProp,'canCallProp':canCallProp,'callProp':callProp,'canSetProp':canSetProp,'setProp':setProp,'canSetStatic':canSetStatic,'setStatic':setStatic,'canDeleteProp':canDeleteProp,'deleteProp':deleteProp,'hasOwnProp':hasOwnProp,'args':args,'tameException':tameException,'callStackUnsealer':callStackSealer.unseal,'RegExp':RegExp,'stamp':stamp,'asFirstClass':asFirstClass,'useGetHandler':useGetHandler,'useApplyHandler':useApplyHandler,'useCallHandler':useCallHandler,'useSetHandler':useSetHandler,'useDeleteHandler':useDeleteHandler,'allowSimpleFunc':grantSimpleFunc,'allowMethod':grantMethod,'allowMutator':grantMutator,'grantSimpleFunc':grantSimpleFunc,'grantMethod':grantMethod,'grantMutator':grantMutator,'enforceMatchable':enforceMatchable,'all2':all2,'sharedImports':sharedImports,'getNewModuleHandler':getNewModuleHandler,'setNewModuleHandler':setNewModuleHandler,'ignoreNewModule':ignoreNewModule,'makeNormalNewModuleHandler':makeNormalNewModuleHandler,'loadModule':loadModule,'getId':getId,'getImports':getImports,'unregister':unregister};each(caja,simpleFunc(function(k,v){if(k
in ___){fail('internal: initialization conflict: ',k);}if(typeof v==='function'){simpleFunc(v);grantCall(caja,k);}___[k]=v;}));setNewModuleHandler(makeNormalNewModuleHandler());})(this);var unicode={};unicode.BASE_CHAR='\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF'+'\u0100-\u0131\u0134-\u013E\u0141-\u0148\u014A-\u017E\u0180-\u01C3'+'\u01CD-\u01F0\u01F4-\u01F5\u01FA-\u0217\u0250-\u02A8\u02BB-\u02C1'+'\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03D6'+'\u03DA\u03DC\u03DE\u03E0\u03E2-\u03F3\u0401-\u040C\u040E-\u044F'+'\u0451-\u045C\u045E-\u0481\u0490-\u04C4\u04C7-\u04C8\u04CB-\u04CC'+'\u04D0-\u04EB\u04EE-\u04F5\u04F8-\u04F9\u0531-\u0556\u0559'+'\u0561-\u0586\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0641-\u064A'+'\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D3\u06D5'+'\u06E5-\u06E6\u0905-\u0939\u093D\u0958-\u0961\u0985-\u098C'+'\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9'+'\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10'+'\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39'+'\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8B\u0A8D\u0A8F-\u0A91'+'\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AE0'+'\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33'+'\u0B36-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B85-\u0B8A'+'\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F'+'\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0C05-\u0C0C'+'\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60-\u0C61'+'\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9'+'\u0CDE\u0CE0-\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28'+'\u0D2A-\u0D39\u0D60-\u0D61\u0E01-\u0E2E\u0E30\u0E32-\u0E33'+'\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D'+'\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB'+'\u0EAD-\u0EAE\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0F40-\u0F47'+'\u0F49-\u0F69\u10A0-\u10C5\u10D0-\u10F6\u1100\u1102-\u1103'+'\u1105-\u1107\u1109\u110B-\u110C\u110E-\u1112\u113C\u113E\u1140'+'\u114C\u114E\u1150\u1154-\u1155\u1159\u115F-\u1161\u1163\u1165'+'\u1167\u1169\u116D-\u116E\u1172-\u1173\u1175\u119E\u11A8\u11AB'+'\u11AE-\u11AF\u11B7-\u11B8\u11BA\u11BC-\u11C2\u11EB\u11F0\u11F9'+'\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45'+'\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D'+'\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC'+'\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC'+'\u2126\u212A-\u212B\u212E\u2180-\u2182\u3041-\u3094\u30A1-\u30FA'+'\u3105-\u312C\uAC00-\uD7A3';unicode.IDEOGRAPHIC='\u4E00-\u9FA5\u3007\u3021-\u3029';unicode.LETTER=unicode.BASE_CHAR+unicode.IDEOGRAPHIC;unicode.COMBINING_CHAR='\u0300-\u0345\u0360-\u0361\u0483-\u0486\u0591-\u05A1\u05A3-\u05B9'+'\u05BB-\u05BD\u05BF\u05C1-\u05C2\u05C4\u064B-\u0652\u0670'+'\u06D6-\u06DC\u06DD-\u06DF\u06E0-\u06E4\u06E7-\u06E8\u06EA-\u06ED'+'\u0901-\u0903\u093C\u093E-\u094C\u094D\u0951-\u0954\u0962-\u0963'+'\u0981-\u0983\u09BC\u09BE\u09BF\u09C0-\u09C4\u09C7-\u09C8'+'\u09CB-\u09CD\u09D7\u09E2-\u09E3\u0A02\u0A3C\u0A3E\u0A3F'+'\u0A40-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A70-\u0A71\u0A81-\u0A83'+'\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0B01-\u0B03\u0B3C'+'\u0B3E-\u0B43\u0B47-\u0B48\u0B4B-\u0B4D\u0B56-\u0B57\u0B82-\u0B83'+'\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C01-\u0C03'+'\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C82-\u0C83'+'\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5-\u0CD6\u0D02-\u0D03'+'\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0E31\u0E34-\u0E3A'+'\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD'+'\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84'+'\u0F86-\u0F8B\u0F90-\u0F95\u0F97\u0F99-\u0FAD\u0FB1-\u0FB7\u0FB9'+'\u20D0-\u20DC\u20E1\u302A-\u302F\u3099\u309A',unicode.DIGIT='\u0030-\u0039\u0660-\u0669\u06F0-\u06F9\u0966-\u096F\u09E6-\u09EF'+'\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE7-\u0BEF\u0C66-\u0C6F'+'\u0CE6-\u0CEF\u0D66-\u0D6F\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29';unicode.EXTENDER='\u00B7\u02D0\u02D1\u0387\u0640\u0E46\u0EC6\u3005\u3031-\u3035'+'\u309D-\u309E\u30FC-\u30FE';var
html4={};html4 .eflags={'OPTIONAL_ENDTAG':1,'BREAKS_FLOW':2,'EMPTY':4,'NAVIGATES':8,'CDATA':16,'RCDATA':32,'UNSAFE':64};html4 .atype={'SCRIPT':1,'STYLE':2,'IDREF':3,'NAME':4,'NMTOKENS':5,'URI':6,'FRAME':7};html4 .ELEMENTS={'a':html4 .eflags.NAVIGATES,'abbr':0,'acronym':0,'address':0,'applet':html4 .eflags.UNSAFE,'area':html4 .eflags.EMPTY|html4 .eflags.NAVIGATES,'b':0,'base':html4 .eflags.UNSAFE|html4 .eflags.EMPTY,'basefont':html4 .eflags.UNSAFE|html4 .eflags.EMPTY,'bdo':0,'big':0,'blockquote':html4
.eflags.BREAKS_FLOW,'body':html4 .eflags.UNSAFE|html4 .eflags.OPTIONAL_ENDTAG,'br':html4 .eflags.EMPTY|html4 .eflags.BREAKS_FLOW,'button':0,'caption':0,'center':html4 .eflags.BREAKS_FLOW,'cite':0,'code':0,'col':html4 .eflags.EMPTY,'colgroup':html4 .eflags.OPTIONAL_ENDTAG,'dd':html4 .eflags.OPTIONAL_ENDTAG|html4 .eflags.BREAKS_FLOW,'del':0,'dfn':0,'dir':html4 .eflags.BREAKS_FLOW,'div':html4 .eflags.BREAKS_FLOW,'dl':html4 .eflags.BREAKS_FLOW,'dt':html4 .eflags.OPTIONAL_ENDTAG|html4 .eflags.BREAKS_FLOW,'em':0,'fieldset':0,'font':0,'form':html4
.eflags.BREAKS_FLOW|html4 .eflags.NAVIGATES,'frame':html4 .eflags.UNSAFE|html4 .eflags.EMPTY,'frameset':html4 .eflags.UNSAFE,'h1':html4 .eflags.BREAKS_FLOW,'h2':html4 .eflags.BREAKS_FLOW,'h3':html4 .eflags.BREAKS_FLOW,'h4':html4 .eflags.BREAKS_FLOW,'h5':html4 .eflags.BREAKS_FLOW,'h6':html4 .eflags.BREAKS_FLOW,'head':html4 .eflags.UNSAFE|html4 .eflags.OPTIONAL_ENDTAG|html4 .eflags.BREAKS_FLOW,'hr':html4 .eflags.EMPTY|html4 .eflags.BREAKS_FLOW,'html':html4 .eflags.UNSAFE|html4 .eflags.OPTIONAL_ENDTAG|html4
.eflags.BREAKS_FLOW,'i':0,'iframe':html4 .eflags.UNSAFE,'img':html4 .eflags.EMPTY,'input':html4 .eflags.EMPTY,'ins':0,'isindex':html4 .eflags.UNSAFE|html4 .eflags.EMPTY|html4 .eflags.BREAKS_FLOW|html4 .eflags.NAVIGATES,'kbd':0,'label':0,'legend':0,'li':html4 .eflags.OPTIONAL_ENDTAG|html4 .eflags.BREAKS_FLOW,'link':html4 .eflags.UNSAFE|html4 .eflags.EMPTY,'map':0,'menu':html4 .eflags.BREAKS_FLOW,'meta':html4 .eflags.UNSAFE|html4 .eflags.EMPTY,'noframes':html4 .eflags.UNSAFE|html4 .eflags.BREAKS_FLOW,'noscript':html4
.eflags.UNSAFE,'object':html4 .eflags.UNSAFE,'ol':html4 .eflags.BREAKS_FLOW,'optgroup':0,'option':html4 .eflags.OPTIONAL_ENDTAG,'p':html4 .eflags.OPTIONAL_ENDTAG|html4 .eflags.BREAKS_FLOW,'param':html4 .eflags.UNSAFE|html4 .eflags.EMPTY,'plaintext':html4 .eflags.OPTIONAL_ENDTAG|html4 .eflags.UNSAFE|html4 .eflags.CDATA,'pre':html4 .eflags.BREAKS_FLOW,'q':0,'s':0,'samp':0,'script':html4 .eflags.UNSAFE|html4 .eflags.CDATA,'select':0,'small':0,'span':0,'strike':0,'strong':0,'style':html4 .eflags.UNSAFE|html4
.eflags.CDATA,'sub':0,'sup':0,'table':html4 .eflags.BREAKS_FLOW,'tbody':html4 .eflags.OPTIONAL_ENDTAG,'td':html4 .eflags.OPTIONAL_ENDTAG|html4 .eflags.BREAKS_FLOW,'textarea':html4 .eflags.RCDATA,'tfoot':html4 .eflags.OPTIONAL_ENDTAG,'th':html4 .eflags.OPTIONAL_ENDTAG|html4 .eflags.BREAKS_FLOW,'thead':html4 .eflags.OPTIONAL_ENDTAG,'title':html4 .eflags.UNSAFE|html4 .eflags.BREAKS_FLOW|html4 .eflags.RCDATA,'tr':html4 .eflags.OPTIONAL_ENDTAG|html4 .eflags.BREAKS_FLOW,'tt':0,'u':0,'ul':html4 .eflags.BREAKS_FLOW,'var':0,'xmp':html4
.eflags.CDATA};html4 .ATTRIBS={'abbr':0,'accept':0,'accept-charset':0,'action':html4 .atype.URI,'align':0,'alink':0,'alt':0,'archive':html4 .atype.URI,'axis':0,'background':html4 .atype.URI,'bgcolor':0,'border':0,'cellpadding':0,'cellspacing':0,'char':0,'charoff':0,'charset':0,'checked':0,'cite':html4 .atype.URI,'class':html4 .atype.NMTOKENS,'classid':html4 .atype.URI,'clear':0,'code':0,'codebase':html4 .atype.URI,'codetype':0,'color':0,'cols':0,'colspan':0,'compact':0,'content':0,'coords':0,'data':html4
.atype.URI,'datetime':0,'declare':0,'defer':0,'dir':0,'disabled':0,'enctype':0,'face':0,'for':html4 .atype.IDREF,'frame':0,'frameborder':0,'headers':0,'height':0,'href':html4 .atype.URI,'hreflang':0,'hspace':0,'id':html4 .atype.IDREF,'ismap':0,'label':0,'lang':0,'language':0,'link':0,'longdesc':html4 .atype.URI,'marginheight':0,'marginwidth':0,'maxlength':0,'media':0,'method':0,'multiple':0,'name':html4 .atype.NAME,'nohref':0,'noresize':0,'noshade':0,'nowrap':0,'object':0,'onblur':html4 .atype.SCRIPT,'onchange':html4
.atype.SCRIPT,'onclick':html4 .atype.SCRIPT,'ondblclick':html4 .atype.SCRIPT,'onfocus':html4 .atype.SCRIPT,'onkeydown':html4 .atype.SCRIPT,'onkeypress':html4 .atype.SCRIPT,'onkeyup':html4 .atype.SCRIPT,'onload':html4 .atype.SCRIPT,'onmousedown':html4 .atype.SCRIPT,'onmousemove':html4 .atype.SCRIPT,'onmouseout':html4 .atype.SCRIPT,'onmouseover':html4 .atype.SCRIPT,'onmouseup':html4 .atype.SCRIPT,'onreset':html4 .atype.SCRIPT,'onselect':html4 .atype.SCRIPT,'onsubmit':html4 .atype.SCRIPT,'onunload':html4
.atype.SCRIPT,'profile':html4 .atype.URI,'prompt':0,'readonly':0,'rel':0,'rev':0,'rows':0,'rowspan':0,'rules':0,'scheme':0,'scope':0,'scrolling':0,'selected':0,'shape':0,'size':0,'span':0,'src':html4 .atype.URI,'standby':0,'start':0,'style':html4 .atype.STYLE,'summary':0,'tabindex':0,'target':html4 .atype.FRAME,'text':0,'title':0,'type':0,'usemap':html4 .atype.URI,'valign':0,'value':0,'valuetype':0,'version':0,'vlink':0,'vspace':0,'width':0};var css={'properties':(function(){var c=[/^\s*inherit\s+$/i,/^\s*(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|purple|red|silver|teal|white|yellow|transparent|inherit)\s+$/i,/^\s*(?:none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|inherit)\s+$/i,/^\s*(?:thin|medium|thick|0|(?:[+-]\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|inherit)\s+$/i,/^\s*(?:none|inherit)\s+$/i,/^\s*(?:url\("[^\(\)\\\"\r\n]+"\)|none|inherit)\s+$/i,/^\s*(?:0|(?:[+-]\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:\d+(?:\.\d+)?)%|auto|inherit)\s+$/i,/^\s*(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:[+-]\d+(?:\.\d+)?)%|none|inherit)\s+$/i,/^\s*(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:[+-]\d+(?:\.\d+)?)%|inherit)\s+$/i,/^\s*(?:auto|always|avoid|left|right|inherit)\s+$/i,/^\s*(?:0|(?:[+-]\d+(?:\.\d+)?)m?s|0|(?:\d+(?:\.\d+)?)%|inherit)\s+$/i,/^\s*(?:0|(?:[+-]\d+(?:\.\d+)?)|inherit)\s+$/i,/^\s*(?:normal|0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|inherit)\s+$/i];return{'azimuth':/^\s*(?:0|(?:[+-]\d+(?:\.\d+)?)(?:deg|g?rad)|leftwards|rightwards|inherit)\s+$/i,'background':c[0],'backgroundAttachment':/^\s*(?:scroll|fixed|inherit)\s+$/i,'backgroundColor':c[1],'backgroundImage':c[5],'backgroundPosition':/^\s*(?:(?:0|(?:\d+(?:\.\d+)?)%|0|(?:[+-]\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|left|center|right)\s+(?:(?:0|(?:\d+(?:\.\d+)?)%|0|(?:[+-]\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|top|center|bottom)\s+)?|inherit\s+)$/i,'backgroundRepeat':/^\s*(?:repeat|repeat-x|repeat-y|no-repeat|inherit)\s+$/i,'border':c[0],'borderBottom':c[0],'borderBottomColor':c[1],'borderBottomStyle':c[2],'borderBottomWidth':c[3],'borderCollapse':/^\s*(?:collapse|separate|inherit)\s+$/i,'borderColor':/^\s*(?:(?:(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|purple|red|silver|teal|white|yellow|transparent)\s+){1,4}|inherit\s+)$/i,'borderLeft':c[0],'borderLeftColor':c[1],'borderLeftStyle':c[2],'borderLeftWidth':c[3],'borderRight':c[0],'borderRightColor':c[1],'borderRightStyle':c[2],'borderRightWidth':c[3],'borderSpacing':/^\s*(?:0|(?:[+-]\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)\s+(?:0|(?:[+-]\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)\s+)?|inherit\s+)$/i,'borderStyle':/^\s*(?:(?:(?:none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset)\s+){1,4}|inherit\s+)$/i,'borderTop':c[0],'borderTopColor':c[1],'borderTopStyle':c[2],'borderTopWidth':c[3],'borderWidth':/^\s*(?:(?:(?:thin|medium|thick|0|(?:[+-]\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc))\s+){1,4}|inherit\s+)$/i,'bottom':c[6],'captionSide':/^\s*(?:top|bottom|inherit)\s+$/i,'clear':/^\s*(?:none|left|right|both|inherit)\s+$/i,'clip':/^\s*(?:auto|inherit)\s+$/i,'color':/^\s*(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|purple|red|silver|teal|white|yellow|inherit)\s+$/i,'counterIncrement':c[4],'counterReset':c[4],'cssFloat':/^\s*(?:left|right|none|inherit)\s+$/i,'cue':c[0],'cueAfter':c[5],'cueBefore':c[5],'cursor':/^\s*(?:(?:url\("[^\(\)\\\"\r\n]+"\)\s+,\s+)*(?:auto|crosshair|default|pointer|move|e-resize|ne-resize|nw-resize|n-resize|se-resize|sw-resize|s-resize|w-resize|text|wait|help|progress)|inherit)\s+$/i,'direction':/^\s*(?:ltr|rtl|inherit)\s+$/i,'display':/^\s*(?:inline|block|list-item|run-in|inline-block|table|inline-table|table-row-group|table-header-group|table-footer-group|table-row|table-column-group|table-column|table-cell|table-caption|none|inherit)\s+$/i,'elevation':/^\s*(?:0|(?:[+-]\d+(?:\.\d+)?)(?:deg|g?rad)|below|level|above|higher|lower|inherit)\s+$/i,'emptyCells':/^\s*(?:show|hide|inherit)\s+$/i,'font':/^\s*(?:caption|icon|menu|message-box|small-caption|status-bar|inherit)\s+$/i,'fontFamily':/^\s*(?:(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|serif|sans-serif|cursive|fantasy|monospace)\s+(?:,\s+(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|serif|sans-serif|cursive|fantasy|monospace)\s+)*|inherit\s+)$/i,'fontSize':/^\s*(?:xx-small|x-small|small|medium|large|x-large|xx-large|(?:small|larg)er|0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:[+-]\d+(?:\.\d+)?)%|inherit)\s+$/i,'fontStyle':/^\s*(?:normal|italic|oblique|inherit)\s+$/i,'fontVariant':/^\s*(?:normal|small-caps|inherit)\s+$/i,'fontWeight':/^\s*(?:normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)\s+$/i,'height':c[6],'left':c[6],'letterSpacing':c[12],'lineHeight':/^\s*(?:normal|0|(?:\d+(?:\.\d+)?)|0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:[+-]\d+(?:\.\d+)?)%|inherit)\s+$/i,'listStyle':c[0],'listStyleImage':c[5],'listStylePosition':/^\s*(?:inside|outside|inherit)\s+$/i,'listStyleType':/^\s*(?:disc|circle|square|decimal|decimal-leading-zero|lower-roman|upper-roman|lower-greek|lower-latin|upper-latin|armenian|georgian|lower-alpha|upper-alpha|none|inherit)\s+$/i,'margin':/^\s*(?:(?:(?:0|(?:[+-]\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:\d+(?:\.\d+)?)%|auto)\s+){1,4}|inherit\s+)$/i,'marginBottom':c[6],'marginLeft':c[6],'marginRight':c[6],'marginTop':c[6],'maxHeight':c[7],'maxWidth':c[7],'minHeight':c[8],'minWidth':c[8],'outline':c[0],'outlineColor':/^\s*(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|purple|red|silver|teal|white|yellow|invert|inherit)\s+$/i,'outlineStyle':c[2],'outlineWidth':c[3],'overflow':/^\s*(?:visible|hidden|scroll|auto|inherit)\s+$/i,'padding':/^\s*(?:(?:(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:[+-]\d+(?:\.\d+)?)%)\s+){1,4}|inherit\s+)$/i,'paddingBottom':c[8],'paddingLeft':c[8],'paddingRight':c[8],'paddingTop':c[8],'pageBreakAfter':c[9],'pageBreakBefore':c[9],'pageBreakInside':/^\s*(?:avoid|auto|inherit)\s+$/i,'pause':/^\s*(?:(?:(?:0|(?:[+-]\d+(?:\.\d+)?)m?s|0|(?:\d+(?:\.\d+)?)%)\s+){1,2}|inherit\s+)$/i,'pauseAfter':c[10],'pauseBefore':c[10],'pitch':/^\s*(?:0|(?:\d+(?:\.\d+)?)k?Hz|x-low|low|medium|high|x-high|inherit)\s+$/i,'pitchRange':c[11],'playDuring':/^\s*(?:auto|none|inherit)\s+$/i,'position':/^\s*(?:static|relative|absolute|fixed|inherit)\s+$/i,'quotes':c[4],'richness':c[11],'right':c[6],'speak':/^\s*(?:normal|none|spell-out|inherit)\s+$/i,'speakHeader':/^\s*(?:once|always|inherit)\s+$/i,'speakNumeral':/^\s*(?:digits|continuous|inherit)\s+$/i,'speakPunctuation':/^\s*(?:code|none|inherit)\s+$/i,'speechRate':/^\s*(?:0|(?:[+-]\d+(?:\.\d+)?)|x-slow|slow|medium|fast|x-fast|faster|slower|inherit)\s+$/i,'stress':c[11],'tableLayout':/^\s*(?:auto|fixed|inherit)\s+$/i,'textAlign':/^\s*(?:left|right|center|justify|inherit)\s+$/i,'textDecoration':c[4],'textIndent':/^\s*(?:0|(?:[+-]\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:\d+(?:\.\d+)?)%|inherit)\s+$/i,'textTransform':/^\s*(?:capitalize|uppercase|lowercase|none|inherit)\s+$/i,'top':c[6],'unicodeBidi':/^\s*(?:normal|embed|bidi-override|inherit)\s+$/i,'verticalAlign':/^\s*(?:baseline|sub|super|top|text-top|middle|bottom|text-bottom|0|(?:\d+(?:\.\d+)?)%|0|(?:[+-]\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|inherit)\s+$/i,'visibility':/^\s*(?:visible|hidden|collapse|inherit)\s+$/i,'voiceFamily':/^\s*(?:(?:(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|male|female|child)\s+,\s+)*(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|male|female|child)|inherit)\s+$/i,'volume':/^\s*(?:0|(?:\d+(?:\.\d+)?)|0|(?:[+-]\d+(?:\.\d+)?)%|silent|x-soft|soft|medium|loud|x-loud|inherit)\s+$/i,'whiteSpace':/^\s*(?:normal|pre|nowrap|pre-wrap|pre-line|inherit)\s+$/i,'wordSpacing':c[12],'zIndex':/^\s*(?:auto|\d+|inherit)\s+$/i};})()};var
html=(function(){var ENTITIES={'LT':'<','GT':'>','AMP':'&','NBSP':'\240','QUOT':'"','APOS':'\''};var decimalEscapeRe=/^#(\d+)$/;var hexEscapeRe=/^#x([0-9A-F]+)$/;function lookupEntity(name){name=name.toUpperCase();if(ENTITIES.hasOwnProperty(name)){return ENTITIES[name];}var m=name.match(decimalEscapeRe);if(m){return String.fromCharCode(parseInt(m[1],10));}else if(!(!(m=name.match(hexEscapeRe)))){return String.fromCharCode(parseInt(m[1],16));}return'';}function decodeOneEntity(_,name){return lookupEntity(name);}var
entityRe=/&(#\d+|#x[\da-f]+|\w+);/g;function unescapeEntities(s){return s.replace(entityRe,decodeOneEntity);}var ampRe=/&/g;var looseAmpRe=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;var ltRe=/</g;var gtRe=/>/g;var quotRe=/\"/g;function escapeAttrib(s){return s.replace(ampRe,'&amp;').replace(ltRe,'&lt;').replace(gtRe,'&gt;').replace(quotRe,'&quot;');}function normalizeRCData(rcdata){return rcdata.replace(looseAmpRe,'&amp;$1').replace(ltRe,'&lt;').replace(gtRe,'&gt;');}var INSIDE_TAG_TOKEN=new
RegExp('^\\s*(?:'+('(?:'+'([a-z][a-z-]*)'+('(?:'+'\\s*=\\s*'+('(?:'+'\"([^\"]*)\"'+'|\'([^\']*)\''+'|([^>\"\'\\s]*)'+')')+')')+'?'+')')+'|(/?>)'+'|[^\\w\\s>]+)','i');var OUTSIDE_TAG_TOKEN=new RegExp('^(?:'+'&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);'+'|<!--[\\s\\S]*?-->|<!\w[^>]*>|<\\?[^>*]*>'+'|<(/)?([a-z][a-z0-9]*)'+'|([^<&]+)'+'|([<&]))','i');function makeSaxParser(handler){return function parse(htmlText,param){htmlText=String(htmlText);var htmlUpper=null;var inTag=false;var attribs=[];var tagName;var
eflags;var openTag;handler.startDoc&&handler.startDoc(param);while(htmlText){var m=htmlText.match(inTag?INSIDE_TAG_TOKEN:OUTSIDE_TAG_TOKEN);htmlText=htmlText.substring(m[0].length);if(inTag){if(m[1]){var attribName=m[1].toLowerCase();var encodedValue=m[2]||m[3]||m[4];var decodedValue;if(encodedValue!=null){decodedValue=unescapeEntities(encodedValue);}else{decodedValue=attribName;}attribs.push(attribName,decodedValue);}else if(m[5]){if(eflags!==undefined){if(openTag){handler.startTag&&handler.startTag(tagName,attribs,param);}else{handler.endTag&&handler.endTag(tagName,param);}}if(openTag&&eflags&(html4
.eflags.CDATA|html4 .eflags.RCDATA)){if(htmlUpper===null){htmlUpper=htmlText.toLowerCase();}else{htmlUpper=htmlUpper.substring(htmlUpper.length-htmlText.length);}var dataEnd=htmlUpper.indexOf('</'+tagName);if(dataEnd<0){dataEnd=htmlText.length;}if(eflags&html4 .eflags.CDATA){handler.cdata&&handler.cdata(htmlText.substring(0,dataEnd),param);}else if(handler.rcdata){handler.rcdata(normalizeRCData(htmlText.substring(0,dataEnd)),param);}htmlText=htmlText.substring(dataEnd);}tagName=eflags=openTag=undefined;attribs.length=0;inTag=false;}}else{if(m[1]){handler.pcdata&&handler.pcdata(m[0],param);}else
if(m[3]){openTag=!m[2];inTag=true;tagName=m[3].toLowerCase();eflags=html4 .ELEMENTS.hasOwnProperty(tagName)?html4 .ELEMENTS[tagName]:undefined;}else if(m[4]){handler.pcdata&&handler.pcdata(m[4],param);}else if(m[5]){handler.pcdata&&handler.pcdata(m[5]==='&'?'&amp;':'&lt;',param);}}}handler.endDoc&&handler.endDoc(param);};}return{'normalizeRCData':normalizeRCData,'escapeAttrib':escapeAttrib,'unescapeEntities':unescapeEntities,'makeSaxParser':makeSaxParser};})();html.makeHtmlSanitizer=function(sanitizeAttributes){var
stack=[];var ignoring=false;return html.makeSaxParser({'startDoc':function(_){stack=[];ignoring=false;},'startTag':function(tagName,attribs,out){if(ignoring){return undefined;}if(!html4 .ELEMENTS.hasOwnProperty(tagName)){return undefined;}var eflags=html4 .ELEMENTS[tagName];if(eflags&html4 .eflags.UNSAFE){ignoring=!(eflags&html4 .eflags.EMPTY);return undefined;}attribs=sanitizeAttributes(tagName,attribs);if(attribs){if(!(eflags&html4 .eflags.EMPTY)){stack.push(tagName);}out.push('<',tagName);for(var
i=0,n=attribs.length;i<n;i+=2){var attribName=attribs[i],value=attribs[i+1];if(value!=null){out.push(' ',attribName,'="',html.escapeAttrib(value),'"');}}out.push('>');}},'endTag':function(tagName,out){if(ignoring){ignoring=false;return undefined;}if(!html4 .ELEMENTS.hasOwnProperty(tagName)){return undefined;}var eflags=html4 .ELEMENTS[tagName];if(!(eflags&(html4 .eflags.UNSAFE|html4 .eflags.EMPTY))){var index;if(eflags&html4 .eflags.OPTIONAL_ENDTAG){for(index=stack.length;--index>=0;){var stackEl=stack[index];if(stackEl===tagName){break;}if(!(html4
.ELEMENTS[stackEl]&html4 .eflags.OPTIONAL_ENDTAG)){return undefined;}}}else{for(index=stack.length;--index>=0;){if(stack[index]===tagName){break;}}}if(index<0){return undefined;}for(var i=stack.length;--i>index;){var stackEl=stack[i];if(!(html4 .ELEMENTS[stackEl]&html4 .eflags.OPTIONAL_ENDTAG)){out.push('</',stackEl,'>');}}stack.length=index;out.push('</',tagName,'>');}},'pcdata':function(text,out){if(!ignoring){out.push(text);}},'rcdata':function(text,out){if(!ignoring){out.push(text);}},'cdata':function(text,out){if(!ignoring){out.push(text);}},'endDoc':function(out){for(var
i=stack.length;--i>=0;){out.push('</',stack[i],'>');}stack.length=0;}});};function html_sanitize(htmlText,opt_urlPolicy,opt_nmTokenPolicy){var out=[];html.makeHtmlSanitizer(function sanitizeAttribs(tagName,attribs){for(var i=0;i<attribs.length;i+=2){var attribName=attribs[i];var value=attribs[i+1];if(html4 .ATTRIBS.hasOwnProperty(attribName)){switch(html4 .ATTRIBS[attribName]){case html4 .atype.SCRIPT:;case html4 .atype.STYLE:value=null;case html4 .atype.IDREF:;case html4 .atype.NAME:;case html4
.atype.NMTOKENS:{value=opt_nmTokenPolicy?opt_nmTokenPolicy(value):value;break;}case html4 .atype.URI:{value=opt_urlPolicy&&opt_urlPolicy(value);break;}}}else{value=null;}attribs[i+1]=value;}return attribs;})(htmlText,out);return out.join('');}function HtmlEmitter(base){if(!base){throw new Error();}this.cursor_=[base];}HtmlEmitter.prototype={'top_':function(){return this.cursor_[this.cursor_.length-1];},'doc_':function(){return this.cursor_[0].ownerDocument||document;},'b':function(tagName,unary){var
el=this.doc_().createElement(tagName);this.top_().appendChild(el);this.cursor_.push(el);return this;},'e':function(tagName){--this.cursor_.length;return this;},'f':function(unary){if(unary){--this.cursor_.length;}return this;},'a':function(name,value){this.top_().setAttribute(name,value);return this;},'pc':function(text){this.top_().appendChild(this.doc_().createTextNode(text));return this;},'cd':function(text){this.top_().appendChild(this.doc_().createTextNode(text));return this;},'ih':function(html){var
top=this.top_();if(top.firstChild){var container=this.doc_().createElement(top.nodeName);container.innerHTML=html;while(container.firstChild){top.appendChild(container.firstChild);}}else{top.innerHTML=html;}return this;}};attachDocumentStub=(function(){var tameNodeTrademark={};function Html(htmlFragment){this.html___=String(htmlFragment||'');}Html.prototype.valueOf=Html.prototype.toString=function(){return this.html___;};function safeHtml(htmlFragment){return htmlFragment instanceof Html?htmlFragment.html___:html.escapeAttrib(String(htmlFragment||''));}function
blessHtml(htmlFragment){return htmlFragment instanceof Html?htmlFragment:new Html(htmlFragment);}var XML_SPACE='\t\n\r ';var XML_NAME_PATTERN=new RegExp('^['+unicode.LETTER+'_:]['+unicode.LETTER+unicode.DIGIT+'.\\-_:'+unicode.COMBINING_CHAR+unicode.EXTENDER+']*$');var XML_NMTOKEN_PATTERN=new RegExp('^['+unicode.LETTER+unicode.DIGIT+'.\\-_:'+unicode.COMBINING_CHAR+unicode.EXTENDER+']+$');var XML_NMTOKENS_PATTERN=new RegExp('^(?:['+XML_SPACE+']*['+unicode.LETTER+unicode.DIGIT+'.\\-_:'+unicode.COMBINING_CHAR+unicode.EXTENDER+']+)+['+XML_SPACE+']*$');var
JS_SPACE='\t\n\r ';var JS_IDENT='(?:[a-zA-Z_][a-zA-Z0-9$_]*[a-zA-Z0-9$]|[a-zA-Z])_?';var SIMPLE_HANDLER_PATTERN=new RegExp('^['+JS_SPACE+']*'+'(return['+JS_SPACE+']+)?'+'('+JS_IDENT+')['+JS_SPACE+']*'+'\\((?:this'+'(?:['+JS_SPACE+']*,['+JS_SPACE+']*event)?'+'['+JS_SPACE+']*)?\\)'+'['+JS_SPACE+']*(?:;?['+JS_SPACE+']*)$');function isXmlName(s){return XML_NAME_PATTERN.test(s);}function isXmlNmTokens(s){return XML_NMTOKENS_PATTERN.test(s);}function mimeTypeForAttr(tagName,attribName){if(tagName==='img'&&attribName==='src'){return'image/*';}return'*/*';}function
assert(cond){if(!cond){console&&(console.log('domita assertion failed'),console.trace());throw new Error();}}function exportFields(ctor,fields){for(var i=fields.length;--i>=0;){var field=fields[i];var fieldUCamel=field.charAt(0).toUpperCase()+field.substring(1);var getterName='get'+fieldUCamel;var setterName='set'+fieldUCamel;var count=0;if(ctor.prototype.hasOwnProperty(getterName)){++count;___.useGetHandler(ctor.prototype,field,ctor.prototype[getterName]);}if(ctor.prototype.hasOwnProperty(setterName)){++count;___.useSetHandler(ctor.prototype,field,ctor.prototype[setterName]);}if(!count){throw new
Error('Failed to export field '+field+' on '+ctor);}}}function extend(subClass,baseClass){var noop=function(){};noop.prototype=baseClass.prototype;subClass.prototype=new noop();subClass.prototype.constructor=subClass;}var cssSealerUnsealerPair=caja.makeSealerUnsealerPair();var timeoutIdTrademark={};function tameSetTimeout(timeout,delayMillis){var timeoutId=setTimeout(___.asSimpleFunc(timeout),delayMillis|0);return ___.freeze(___.stamp(timeoutIdTrademark,{'timeoutId___':timeoutId}));}___.simpleFunc(tameSetTimeout);function
tameClearTimeout(timeoutId){___.guard(timeoutIdTrademark,timeoutId);clearTimeout(timeoutId.timeoutId___);}___.simpleFunc(tameClearTimeout);var intervalIdTrademark={};function tameSetInterval(interval,delayMillis){var intervalId=setInterval(___.asSimpleFunc(interval),delayMillis|0);return ___.freeze(___.stamp(intervalIdTrademark,{'intervalId___':intervalId}));}___.simpleFunc(tameSetInterval);function tameClearInterval(intervalId){___.guard(intervalIdTrademark,intervalId);clearInterval(intervalId.intervalId___);}___.simpleFunc(tameClearInterval);function
attachDocumentStub(idSuffix,uriCallback,imports){var elementPolicies={};elementPolicies.form=function(attribs){var sawHandler=false;for(var i=0,n=attribs.length;i<n;i+=2){if(attribs[i]==='onsubmit'){sawHandler=true;}}if(!sawHandler){attribs.push('onsubmit','return false');}return attribs;};elementPolicies.a=elementPolicies.area=function(attribs){attribs.push('target','_blank');return attribs;};function sanitizeHtml(htmlText){var out=[];htmlSanitizer(htmlText,out);return out.join('');}var htmlSanitizer=html.makeHtmlSanitizer(function
sanitizeAttributes(tagName,attribs){for(var i=0;i<attribs.length;i+=2){var attribName=attribs[i];var value=attribs[i+1];if(html4 .ATTRIBS.hasOwnProperty(attribName)){var atype=html4 .ATTRIBS[attribName];value=rewriteAttribute(tagName,attribName,atype,value);}else{value=null;}if(value!=null){attribs[i+1]=value;}else{attribs.splice(i,2);i-=2;}}var policy=elementPolicies[tagName];if(policy&&elementPolicies.hasOwnProperty(tagName)){return policy(attribs);}return attribs;});function tameInnerHtml(htmlText){var
out=[];innerHtmlTamer(htmlText,out);return out.join('');}var innerHtmlTamer=html.makeSaxParser({'startTag':function(tagName,attribs,out){out.push('<',tagName);for(var i=0;i<attribs.length;i+=2){var attribName=attribs[i];if(attribName==='target'){continue;}var atype=html4 .ATTRIBS[attribName];var value=attribs[i+1];if(atype===html4 .atype.IDREF){if(value.length<=idSuffix.length||idSuffix!==value.substring(value.length-idSuffix.length)){continue;}value=value.substring(0,value.length-idSuffix.length);}if(value!=null){out.push(' ',attribName,'="',html.escapeAttrib(value),'"');}}out.push('>');},'endTag':function(name,out){out.push('</',name,'>');},'pcdata':function(text,out){out.push(text);},'rcdata':function(text,out){out.push(text);},'cdata':function(text,out){out.push(text);}});var
illegalSuffix=/__(?:\s|$)/;function rewriteAttribute(tagName,attribName,type,value){switch(type){case html4 .atype.IDREF:{value=String(value);if(value&&!illegalSuffix.test(value)&&isXmlName(value)){return value+idSuffix;}return null;}case html4 .atype.NAME:{value=String(value);if(value&&!illegalSuffix.test(value)&&isXmlName(value)){return value;}return null;}case html4 .atype.NMTOKENS:{value=String(value);if(value&&!illegalSuffix.test(value)&&isXmlNmTokens(value)){return value;}return null;}case
html4 .atype.SCRIPT:{value=String(value);var match=value.match(SIMPLE_HANDLER_PATTERN);if(!match){return null;}var doesReturn=match[1];var fnName=match[2];var pluginId=___.getId(imports);value=(doesReturn?'return ':'')+'plugin_dispatchEvent___('+'this, event || window.event, '+pluginId+', "'+fnName+'");';if(attribName==='onsubmit'){value='try { '+value+' } finally { return false; }';}return value;}case html4 .atype.URI:{value=String(value);if(!uriCallback){return null;}return uriCallback.rewrite(value,mimeTypeForAttr(tagName,attribName))||null;}case
html4 .atype.STYLE:{if('function'!==typeof value){return null;}var cssPropertiesAndValues=cssSealerUnsealerPair.unseal(value);if(!cssPropertiesAndValues){return null;}var css=[];for(var i=0;i<cssPropertiesAndValues.length;i+=2){var propName=cssPropertiesAndValues[i];var propValue=cssPropertiesAndValues[i+1];var semi=propName.indexOf(';');if(semi>=0){propName=propName.substring(0,semi);}css.push(propName+' : '+propValue);}return css.join(' ; ');}case html4 .atype.FRAME:{value=String(value);return null;}default:return String(value);}}function
tameNode(node,editable){if(node===null||node===void 0){return null;}var tamed;switch(node.nodeType){case 1:{switch(node.tagName.toLowerCase()){case'a':{tamed=new TameAElement(node,editable);break;}case'form':{tamed=new TameFormElement(node,editable);break;}case'input':{tamed=new TameInputElement(node,editable);break;}case'img':{tamed=new TameImageElement(node,editable);break;}default:{tamed=new TameElement(node,editable);break;}}break;}case 3:{tamed=new TameTextNode(node,editable);break;}case 8:{tamed=new
TameCommentNode(node,editable);break;}default:return null;}return tamed;}function tameNodeList(nodeList,editable,opt_keyAttrib){var tamed=[];for(var i=nodeList.length;--i>=0;){var node=tameNode(nodeList.item(i),editable);tamed[i]=node;var key=opt_keyAttrib&&node.getAttribute(opt_keyAttrib);if(key&&!(/_$/.test(key)||key in tamed||key===String(key&2147483647))){tamed[key]=node;}}tamed.item=function(k){k&=2147483647;if(isNaN(k)){throw new Error();}return this[k]||null;};return tamed;}function TameNode(node,editable){this.node___=node;this.editable___=editable;___.stamp(tameNodeTrademark,this,true);}TameNode.prototype.getNodeType=function(){return this.node___.nodeType;};TameNode.prototype.getNodeName=function(){return this.node___.nodeName;};TameNode.prototype.getNodeValue=function(){return this.node___.nodeValue;};TameNode.prototype.appendChild=function(child){caja.guard(tameNodeTrademark,child);this.node___.appendChild(child.node___);};TameNode.prototype.insertBefore=function(child){caja.guard(tameNodeTrademark,child);this.node___.insertBefore(child.node___);};TameNode.prototype.removeChild=function(child){caja.guard(tameNodeTrademark,child);this.node___.removeChild(child.node___);};TameNode.prototype.replaceChild=function(child,replacement){caja.guard(tameNodeTrademark,child);caja.guard(tameNodeTrademark,replacement);if(!this.editable___||!replacement.editable___){throw new
Error();}this.node___.replaceChild(child.node___,replacement.node___);};TameNode.prototype.getFirstChild=function(){return tameNode(this.node___.firstChild,this.editable___);};TameNode.prototype.getLastChild=function(){return tameNode(this.node___.lastChild,this.editable___);};TameNode.prototype.getNextSibling=function(){return tameNode(this.node___.nextSibling,this.editable___);};TameNode.prototype.getPreviousSibling=function(){return tameNode(this.node___.previousSibling,this.editable___);};TameNode.prototype.getParentNode=function(){var
parent=this.node___.parentNode;for(var ancestor=parent;ancestor;ancestor=ancestor.parentNode){if(idClass===ancestor.className){console.log('found parent '+parent);return tameNode(parent,this.editable___);}}console.log('missing classname '+idClass);return null;};TameNode.prototype.getElementsByTagName=function(tagName){return tameNodeList(this.node___.getElementsByTagName(String(tagName)),this.editable___);};___.ctor(TameNode,undefined,'TameNode');___.all2(___.allowMethod,TameNode,['getNodeType','getNodeValue','getNodeName','appendChild','insertBefore','removeChild','replaceChild','getFirstChild','getLastChild','getNextSibling','getPreviousSibling','getElementsByTagName']);exportFields(TameNode,['nodeType','nodeValue','nodeName','firstChild','lastChild','nextSibling','previousSibling','parentNode']);function
TameTextNode(node,editable){assert(node.nodeType===3);TameNode.call(this,node,editable);}extend(TameTextNode,TameNode);TameTextNode.prototype.setNodeValue=function(value){if(!this.editable___){throw new Error();}this.node___.nodeValue=String(value||'');return value;};TameTextNode.prototype.getData=TameTextNode.prototype.getNodeValue;TameTextNode.prototype.setData=TameTextNode.prototype.setNodeValue;TameTextNode.prototype.toString=function(){return'#text';};___.ctor(TameTextNode,undefined,'TameNode');___.all2(___.allowMethod,TameTextNode,['setNodeValue','getData','setData']);exportFields(TameTextNode,['nodeValue','data']);function
TameCommentNode(node,editable){assert(node.nodeType===8);TameNode.call(this,node,editable);}extend(TameCommentNode,TameNode);TameCommentNode.prototype.toString=function(){return'#comment';};___.ctor(TameCommentNode,undefined,'TameNode');function TameElement(node,editable){assert(node.nodeType===1);TameNode.call(this,node,editable);}extend(TameElement,TameNode);TameElement.prototype.getId=function(){return this.getAttribute('id')||'';};TameElement.prototype.setId=function(newId){return this.setAttribute('id',newId);};TameElement.prototype.getAttribute=function(name){name=String(name).toLowerCase();var
type=html4 .ATTRIBS[name];if(type===undefined||!html4 .ATTRIBS.hasOwnProperty(name)){return null;}var value=this.node___.getAttribute(name);if('string'!==typeof value){return value;}switch(type){case html4 .atype.IDREF:{if(!value){return'';}var n=idSuffix.length;var len=value.length;var end=len-n;if(end>0&&idSuffix===value.substring(end,len)){return value.substring(0,end);}return'';}default:return value;}};TameElement.prototype.setAttribute=function(name,value){if(!this.editable___){throw new Error();}name=String(name).toLowerCase();var
type=html4 .ATTRIBS[name];if(type===undefined||!html4 .ATTRIBS.hasOwnProperty(name)){throw new Error();}var sanitizedValue=rewriteAttribute(this.node___.tagName,name,type,value);if(sanitizedValue!==null){this.node___.setAttribute(name,sanitizedValue);}return value;};TameElement.prototype.getClassName=function(){return this.getAttribute('class')||'';};TameElement.prototype.setClassName=function(classes){if(!this.editable___){throw new Error();}return this.setAttribute('class',String(classes));};TameElement.prototype.getTagName=TameNode.prototype.getNodeName;TameElement.prototype.getInnerHTML=function(){var
tagName=this.node___.tagName.toLowerCase();if(!html4 .ELEMENTS.hasOwnProperty(tagName)){return'';}var flags=html4 .ELEMENTS[tagName];var innerHtml=this.node___.innerHTML;if(flags&html4 .eflags.CDATA){innerHtml=html.escapeAttrib(innerHtml);}else if(flags&html4 .eflags.RCDATA){innerHtml=html.normalizeRCData(innerHtml);}else{innerHtml=tameInnerHtml(innerHtml);}return innerHtml;};TameElement.prototype.setInnerHTML=function(htmlFragment){if(!this.editable___){throw new Error();}var tagName=this.node___.tagName.toLowerCase();if(!html4
.ELEMENTS.hasOwnProperty(tagName)){throw new Error();}var flags=html4 .ELEMENTS[tagName];if(flags&html4 .eflags.UNSAFE){throw new Error();}var sanitizedHtml;if(flags&html4 .eflags.RCDATA){sanitizedHtml=html.normalizeRCData(String(htmlFragment||''));}else{sanitizedHtml=htmlFragment instanceof Html?safeHtml(htmlFragment):sanitizeHtml(String(htmlFragment||''));}this.node___.innerHTML=sanitizedHtml;return htmlFragment;};TameElement.prototype.setStyle=function(style){this.setAttribute('style',style);return this.getStyle();};TameElement.prototype.getStyle=function(){return new
TameStyle(this.node___.style,this.editable___);};TameElement.prototype.updateStyle=function(style){if(!this.editable___){throw new Error();}var cssPropertiesAndValues=cssSealerUnsealerPair.unseal(style);if(!cssPropertiesAndValues){throw new Error();}var styleNode=this.node___.style;for(var i=0;i<cssPropertiesAndValues.length;i+=2){var propName=cssPropertiesAndValues[i];var propValue=cssPropertiesAndValues[i+1];var semi=propName.indexOf(';');if(semi>=0){propName=propName.substring(semi+1);}styleNode[propName]=propValue;}};function
makeEventHandlerWrapper(thisNode,listener){if('function'!==typeof listener){throw new Error('Expected function not '+typeof listener);}return function(event){return plugin_dispatchEvent___(thisNode,event||window.event,___.getId(imports),listener);};}TameElement.prototype.addEventListener=function(name,listener,bubble){if(!this.editable___){throw new Error();}name=String(name);var wrappedListener=makeEventHandlerWrapper(this.node___,listener);if(this.node___.addEventListener){this.node___.addEventListener(name,wrappedListener,bubble===undefined?undefined:Boolean(bubble));}else{this.node___.attachEvent('on'+name,wrappedListener);}};TameElement.prototype.getOffsetLeft=function(){return this.node___.offsetLeft;};TameElement.prototype.getOffsetTop=function(){return this.node___.offsetTop;};TameElement.prototype.getOffsetWidth=function(){return this.node___.offsetWidth;};TameElement.prototype.getOffsetHeight=function(){return this.node___.offsetHeight;};TameElement.prototype.toString=function(){return'<'+this.node___.tagName+'>';};___.ctor(TameElement,TameNode,'TameElement');___.all2(___.allowMethod,TameElement,['addEventListener','getAttribute','setAttribute','getClassName','setClassName','getId','setId','getInnerHTML','setInnerHTML','updateStyle','getStyle','setStyle','getTagName','getOffsetLeft','getOffsetTop','getOffsetWidth','getOffsetHeight']);exportFields(TameElement,['className','id','innerHTML','tagName','style','offsetLeft','offsetTop','offsetWidth','offsetHeight']);(function(){for(var
html4Attrib in html4 .ATTRIBS){if(html4 .atype.SCRIPT===html4 .ATTRIBS[html4Attrib]){___.useSetHandler(TameElement.prototype,html4Attrib,(function(attribName){return function eventHandlerSetter(listener){if(!this.editable___){throw new Error();}if(!listener){this.node___[attribName]=null;}else{this.node___[attribName]=makeEventHandlerWrapper(this.node___,listener);return listener;}};})(html4Attrib));}}})();function TameAElement(node,editable){TameElement.call(this,node,editable);}extend(TameAElement,TameElement);TameAElement.prototype.getHref=function(){return this.node___.href;};TameAElement.prototype.setHref=function(href){this.setAttribute('href',href);return href;};___.ctor(TameAElement,TameElement,'TameAElement');___.all2(___.allowMethod,TameAElement,['getHref','setHref']);exportFields(TameAElement,['href']);function
TameFormElement(node,editable){TameElement.call(this,node,editable);}extend(TameFormElement,TameElement);TameFormElement.prototype.getElements=function(){return tameNodeList(this.node___.elements,this.editable___,'name');};___.ctor(TameFormElement,TameElement,'TameFormElement');___.all2(___.allowMethod,TameFormElement,['getElements']);exportFields(TameFormElement,['elements']);function TameInputElement(node,editable){TameElement.call(this,node,editable);}extend(TameInputElement,TameElement);TameInputElement.prototype.getValue=function(){var
value=this.node___.value;return value==null?null:String(value);};TameInputElement.prototype.setValue=function(newValue){if(!this.editable___){throw new Error();}this.node___.value=newValue==null?'':''+value;return newValue;};TameInputElement.prototype.focus=function(){if(!this.editable___){throw new Error();}this.node___.focus();};TameInputElement.prototype.blur=function(){if(!this.editable___){throw new Error();}this.node___.blur();};TameInputElement.prototype.getForm=function(){return tameNode(this.node___.form,this.editable___);};___.ctor(TameInputElement,TameElement,'TameInputElement');___.all2(___.allowMethod,TameInputElement,['getValue','setValue','focus','getForm']);exportFields(TameInputElement,['value','form']);function
TameImageElement(node,editable){TameElement.call(this,node,editable);}extend(TameImageElement,TameElement);TameImageElement.prototype.getSrc=function(){return this.node___.src;};TameImageElement.prototype.setSrc=function(src){this.setAttribute('src',src);return src;};___.ctor(TameImageElement,TameElement,'TameImageElement');___.all2(___.allowMethod,TameImageElement,['getSrc','setSrc']);exportFields(TameImageElement,['src']);function TameEvent(event){this.event___=event;}TameEvent.prototype.getType=function(){return String(this.event___.type);};TameEvent.prototype.getTarget=function(){return tameNode(this.event___.target,true);};TameEvent.prototype.getPageX=function(){return Number(this.event___.pageX);};TameEvent.prototype.getPageY=function(){return Number(this.event___.pageY);};TameEvent.prototype.stopPropagation=function(){return this.event___.stopPropagation();};TameEvent.prototype.getAltKey=function(){return Boolean(this.event___.altKey);};TameEvent.prototype.getCtrlKey=function(){return Boolean(this.event___.ctrlKey);};TameEvent.prototype.getMetaKey=function(){return Boolean(this.event___.metaKey);};TameEvent.prototype.getShiftKey=function(){return Boolean(this.event___.shiftKey);};TameEvent.prototype.getButton=function(){var
e=this.event___;return e.button&&Number(e.button);};TameEvent.prototype.getClientX=function(){return Number(this.event___.clientX);};TameEvent.prototype.getClientY=function(){return Number(this.event___.clientY);};TameEvent.prototype.getWhich=function(){var w=this.event___.which;return w&&Number(w);};TameEvent.prototype.getKeyCode=function(){var kc=this.event___.keyCode;return kc&&Number(kc);};TameEvent.prototype.toString=function(){return'Not a real event';};___.ctor(TameEvent,undefined,'TameEvent');___.all2(___.allowMethod,TameEvent,['getType','getTarget','getPageX','getPageY','stopPropagation','getAltKey','getCtrlKey','getMetaKey','getShiftKey','getButton','getClientX','getClientY','getKeyCode','getWhich']);exportFields(TameEvent,['type','target','pageX','pageY','altKey','ctrlKey','metaKey','shiftKey','button','clientX','clientY','keyCode','which']);function
TameDocument(doc,editable){this.doc___=doc;this.editable___=editable;}TameDocument.prototype.createElement=function(tagName){if(!this.editable___){throw new Error();}tagName=String(tagName).toLowerCase();if(!html4 .ELEMENTS.hasOwnProperty(tagName)){throw new Error();}var flags=html4 .ELEMENTS[tagName];if(flags&html4 .eflags.UNSAFE){throw new Error();}var newEl=this.doc___.createElement(tagName);if(elementPolicies.hasOwnProperty(tagName)){var attribs=elementPolicies[tagName]([]);if(attribs){for(var
i=0;i<attribs.length;i+=2){newEl.setAttribute(attribs[i],attribs[i+1]);}}}return tameNode(newEl,true);};TameDocument.prototype.createTextNode=function(text){if(!this.editable___){throw new Error();}return tameNode(this.doc___.createTextNode(text!=null?''+text:''),true);};TameDocument.prototype.getElementById=function(id){id+=idSuffix;var node=this.doc___.getElementById(id);return tameNode(node,this.editable___);};TameDocument.prototype.toString=function(){return'[Fake Document]';};___.ctor(TameDocument,undefined,'TameDocument');___.all2(___.allowMethod,TameDocument,['createElement','createTextNode','getElementById']);imports.tameNode___=tameNode;imports.tameEvent___=function(event){return new
TameEvent(event);};imports.blessHtml___=blessHtml;imports.blessCss___=function(var_args){var arr=[];for(var i=0,n=arguments.length;i<n;++i){arr[i]=arguments[i];}return cssSealerUnsealerPair.seal(arr);};imports.htmlAttr___=function(s){return html.escapeAttrib(String(s||''));};imports.html___=safeHtml;imports.rewriteUri___=function(uri,mimeType){var s=rewriteAttribute(null,null,html4 .atype.URI,uri);if(!s){throw new Error();}return s;};imports.suffix___=function(nmtokens){var p=String(nmtokens).replace(/^\s+|\s+$/g,'').split(/\s+/g);var
out=[];for(var i=0;i<p.length;++i){nmtoken=rewriteAttribute(null,null,html4 .atype.IDREF,p[i]);if(!nmtoken){throw new Error(nmtokens);}out.push(nmtoken);}return out.join(' ');};imports.ident___=function(nmtokens){var p=String(nmtokens).replace(/^\s+|\s+$/g,'').split(/\s+/g);var out=[];for(var i=0;i<p.length;++i){nmtoken=rewriteAttribute(null,null,html4 .atype.NMTOKENS,p[i]);if(!nmtoken){throw new Error(nmtokens);}out.push(nmtoken);}return out.join(' ');};function TameStyle(style,editable){this.style___=style;this.editable___=editable;}for(var
styleProperty in css.properties){if(!caja.canEnumOwn(css.properties,styleProperty)){continue;}(function(propertyName){___.useGetHandler(TameStyle.prototype,propertyName,function(opt_shouldThrow){return String(this.style___[propertyName]||'');});var pattern=css.properties[propertyName];___.useSetHandler(TameStyle.prototype,propertyName,function(val){if(!this.editable___){throw new Error('style not editable');}val=''+(val||'');if(val&&!pattern.test(val+' ')){throw new Error('bad value `'+val+'` for CSS property '+propertyName);}val=val.replace(/\burl\s*\(\s*\"([^\"]*)\"\s*\)/gi,function(_,url){throw new
Error('url in style '+url);});this.style___[propertyName]=val;});})(styleProperty);}TameStyle.prototype.toString=function(){return'[Fake Style]';};imports.cssNumber___=function(num){if('number'===typeof num&&isFinite(num)&&!isNaN(num)){return''+num;}throw new Error(num);};imports.cssColor___=function(color){if('number'!==typeof color||color!=(color|0)){throw new Error(color);}var hex='0123456789abcdef';return'#'+hex.charAt(color>>20&15)+hex.charAt(color>>16&15)+hex.charAt(color>>12&15)+hex.charAt(color>>8&15)+hex.charAt(color>>4&15)+hex.charAt(color&15);};imports.cssUri___=function(uri,mimeType){var
s=rewriteAttribute(null,null,html4 .atype.URI,uri);if(!s){throw new Error();}return s;};imports.emitCss___=function(cssText){var styleSheet=document.createElement('style');styleSheet.setAttribute('type','text/css');if(styleSheet.styleSheet){styleSheet.styleSheet.cssText=cssText;}else{styleSheet.appendChild(document.createTextNode(cssText));}this.getCssContainer___().appendChild(styleSheet);};imports.getCssContainer___=function(){return document.body;};var idClass=idSuffix.replace(/^-/,'');imports.getIdClass___=function(){return idClass;};imports.setTimeout=tameSetTimeout;imports.setInterval=tameSetInterval;imports.clearTimeout=tameClearTimeout;imports.clearInterval=tameClearInterval;imports.document=new
TameDocument(document,true);}return attachDocumentStub;})();function plugin_dispatchEvent___(thisNode,event,pluginId,handler){typeof console!=='undefined'&&console.log&&console.log('Dispatch %s event thisNode=%o, event=%o, pluginId=%o, handler=%o',event.type,thisNode,event,pluginId,handler);var imports=___.getImports(pluginId);switch(typeof handler){case'string':{handler=imports[handler];break;}case'function':break;default:throw new Error('Expected function as event handler, not '+typeof handler);}___.startCallerStack&&___.startCallerStack();try{return ___.asSimpleFunc(handler)(imports.tameNode___(thisNode,true),imports.tameEvent___(event));}catch(ex){if(ex&&ex.cajaStack___&&'undefined'!==typeof
console){console.error('Event dispatch %s: %s',handler,___.unsealCallerStack(ex.cajaStack___).join('\n'));}throw ex;}}