<?xml version="1.0" encoding="UTF-8" ?>
<Module>
 <ModulePrefs title="foo">
   <Require feature="opensocial-0.7"/>
 </ModulePrefs>
 <Content type="html">
 <![CDATA[
<style>
body { margin: 0px; padding: 0px; }
#showfriendimg { position: absolute; z-index: 2; display: none; top: 1px; background-color: #E1E1E1; max-width: 100px; border: 2px solid #0099FF; text-align: center; overflow: hidden;}
#showfriendimg b { max-width: 100px; }
#friendsataglance {width: 430px; overflow:hidden; margin: 0px; padding: 0px; text-align: center; }
#friendsataglance a { color: #FFFFFF; text-decoration: none; }
#friendsataglance a img { float: left; width: 26px; height: 26px; display: block; margin: 0px; padding: 0px; }
</style>
<div id="showfriendimg"></div>
<div id="friendsataglance"></div>

<script type="text/javascript">
var currentUserId;
var currentUser;
var viewerId;
var serverURL = '/opensocial/showallfriends';
var serverName = 'http://beta.myhotcomments.com';
var page = 0;

function populateUserData() {    
        var dataRequest = opensocial.newDataRequest();
        var personRequest = dataRequest.newFetchPersonRequest(opensocial.DataRequest.PersonId.OWNER);
        dataRequest.add(personRequest);
        dataRequest.send(populateUserData_Callback);
}

function populateUserData_Callback(dataResponse) {
        
    var ownerData = dataResponse.get(opensocial.DataRequest.PersonId.OWNER).getData();
    var ownerId = ownerData.getField(opensocial.Person.Field.ID);
    currentUserId = ownerId;
    requestURL = serverName+serverURL+"/"+currentUserId;
    
    var params = {};
    params[opensocial.ContentRequestParameters.METHOD] = opensocial.ContentRequestParameters.MethodType.GET;
    params[opensocial.ContentRequestParameters.CONTENT_TYPE] = opensocial.ContentRequestParameters.ContentType.HTML;
    params[opensocial.ContentRequestParameters.AUTHENTICATION] =  opensocial.ContentRequestParameters.AuthenticationType.SIGNED;
    opensocial.Container.get().makeRequest(requestURL, loaddiv, params);
}

function loaddiv(data) { document.getElementById('friendsataglance').innerHTML = data; }

function showfriend(id, pos, extra) {
  
  imgdiv = document.getElementById('showfriendimg');
  friendimage = document.getElementById(id);
  if (pos == "right") {
    imgdiv.style.left = '322px'; imgdiv.style.top = '0px';
  } else {
    imgdiv.style.top = '0px'; imgdiv.style.left = '0px';  
}
  imgdiv.style.display = "block";
    
  imgdiv.innerHTML = "<table width=100 id='ietablefix' cellpadding=0 cellspacing=0><tr><td align='center'>" + "<img src='"+friendimage.src+"'><br><b>"+friendimage.alt+"</b>"+extra+"</td></tr></table>";

}


function hidefriend(id) { 
  imgdiv = document.getElementById('showfriendimg');
  friendimage = document.getElementById(id);
  imgdiv.style.display = "none";
  imgdiv.innerHTML = "";
}

function init() {
    populateUserData();
}

init();
</script>
]]>
</Content>
</Module>